{"remainingRequest":"C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\src\\views\\TambahMahasiswa.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\src\\views\\TambahMahasiswa.vue","mtime":1611046620733},{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgQkZvcm1GaWxlIH0gZnJvbSAnYm9vdHN0cmFwLXZ1ZScKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgICdiLWZvcm0tZmlsZSc6IEJGb3JtRmlsZSwKICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgbmlrOiAnJywKICAgICAgbmFtYTogJycsCiAgICAgIHZpZGVvOiB7fSwKICAgICAgY2FudmFzOiB7fSwKICAgICAgY2FwdHVyZXM6IFtdLAogICAgICBpc0NhbWVyYU9wZW46IGZhbHNlLAogICAgICBpc1Bob3RvVGFrZW46IGZhbHNlLAogICAgICBpbWFnZVNhdmVkOiBmYWxzZSwKICAgICAgdmlhVXBsb2FkOiBmYWxzZSwKICAgICAgdmlhTGl2ZTogbnVsbCwKICAgICAgZmlsZToge30sCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZm9ybUZpbGxlZCAoKSB7CiAgICAgIHJldHVybiB0aGlzLm5payAhPT0gJycgJiYgdGhpcy5uYW1hICE9PSAnJwogICAgfSwKICB9LAogIG1vdW50ZWQgKCkge30sCiAgbWV0aG9kczogewogICAgY2hlY2sgKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgIGlmICh0aGlzLnZpYVVwbG9hZCkgewogICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCB0aGlzLmZpbGUpCiAgICAgICAgLy8gWW91IHNob3VsZCBoYXZlIGEgc2VydmVyIHNpZGUgUkVTVCBBUEkKICAgICAgICBheGlvcy5wb3N0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYWRkX2VtcGxveWVlX3VwbG9hZC8nICsgdGhpcy5uaWsgKyAnLycgKyB0aGlzLm5hbWEsIGZvcm1EYXRhLCB7IGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJyB9IH0pCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWNjZXNzJykKICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCkKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUudG9TdHJpbmcoKSkKICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCkKICAgICAgICAgIH0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zdG9wQ2FtZXJhU3RyZWFtKCkKICAgICAgICBheGlvcwogICAgICAgICAgLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2FkZF9lbXBsb3llZS8nICsgdGhpcy5uaWsgKyAnLycgKyB0aGlzLm5hbWEpCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgICAgICBhbGVydCgnVGFtYmFoIE1haGFzaXN3YSBCZXJoYXNpbCEnKQogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKQogICAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIGZvcm1SZWFkeVRvU3VibWl0ICgpIHsKICAgICAgaWYgKHRoaXMudmlhVXBsb2FkKSB7CiAgICAgICAgLy8ga2FsYXUgdmlhIHVwbG9hZCwgc2lhcCBzdWJtaXQgYmVyYXJ0aSBzZW11YSBmb3JtIHRlbGFoIGRpaXNpCiAgICAgICAgcmV0dXJuIHRoaXMubmlrICE9PSAnJyAmJiB0aGlzLm5hbWEgIT09ICcnICYmIHRoaXMuZmlsZQogICAgICB9IGVsc2UgewogICAgICAgIC8vIGthbGF1IHZpYSBmb3RvIGxpdmUsIHNpYXAgc3VibWl0IGJlcmFydGkgc2VtdWEgZm9ybSB0ZWxhaCBkaWlzaSBkYW4gZ2FtYmFyIHRlbGFoIHRlcnNpbXBhbiBkaSBEb3dubG9hZHMKICAgICAgICByZXR1cm4gdGhpcy5uaWsgIT09ICcnICYmIHRoaXMubmFtYSAhPT0gJycgJiYgdGhpcy5pbWFnZVNhdmVkICYmIHRoaXMuaXNQaG90b1Rha2VuCiAgICAgIH0KICAgIH0sCiAgICBjYXB0dXJlICgpIHsKICAgICAgY29uc29sZS5sb2coJ2NhcHR1cmUgaW1hZ2UnKQogICAgfSwKICAgIHRvZ2dsZUNhbWVyYSAoKSB7CiAgICAgIGlmICh0aGlzLmlzQ2FtZXJhT3BlbikgewogICAgICAgIHRoaXMudmlhTGl2ZSA9IGZhbHNlCiAgICAgICAgdGhpcy5pc0NhbWVyYU9wZW4gPSBmYWxzZQogICAgICAgIHRoaXMuaXNQaG90b1Rha2VuID0gZmFsc2UKICAgICAgICB0aGlzLnN0b3BDYW1lcmFTdHJlYW0oKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudmlhTGl2ZSA9IHRydWUKICAgICAgICB0aGlzLmlzQ2FtZXJhT3BlbiA9IHRydWUKICAgICAgICB0aGlzLmNyZWF0ZUNhbWVyYUVsZW1lbnQoKQogICAgICB9CiAgICB9LAogICAgdG9nZ2xlRm9ybVVwbG9hZCAoKSB7CiAgICAgIGNvbnNvbGUubG9nKCd1c2luZyB1cGxvYWQnKQogICAgICB0aGlzLnZpYVVwbG9hZCA9IHRydWUKICAgIH0sCiAgICBjcmVhdGVDYW1lcmFFbGVtZW50ICgpIHsKICAgICAgY29uc3QgY29uc3RyYWludHMgPSAod2luZG93LmNvbnN0cmFpbnRzID0gewogICAgICAgIGF1ZGlvOiBmYWxzZSwKICAgICAgICB2aWRlbzogdHJ1ZSwKICAgICAgfSkKICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcwogICAgICAgIC5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpCiAgICAgICAgLnRoZW4oc3RyZWFtID0+IHsKICAgICAgICAgIHRoaXMuJHJlZnMuY2FtZXJhLnNyY09iamVjdCA9IHN0cmVhbQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIGFsZXJ0KGVycm9yKQogICAgICAgIH0pCiAgICB9LAogICAgc3RvcENhbWVyYVN0cmVhbSAoKSB7CiAgICAgIGNvbnN0IHRyYWNrcyA9IHRoaXMuJHJlZnMuY2FtZXJhLnNyY09iamVjdC5nZXRUcmFja3MoKQogICAgICB0cmFja3MuZm9yRWFjaCh0cmFjayA9PiB7CiAgICAgICAgdHJhY2suc3RvcCgpCiAgICAgIH0pCiAgICB9LAogICAgdGFrZVBob3RvICgpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ3Rha2luZyBwaG90bycpCiAgICAgIHRoaXMuaXNQaG90b1Rha2VuID0gIXRoaXMuaXNQaG90b1Rha2VuCiAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLiRyZWZzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpCiAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHRoaXMuJHJlZnMuY2FtZXJhLCAwLCAwLCA0NTAsIDMzNy41KQogICAgfSwKICAgIGRvd25sb2FkSW1hZ2UgKCkgewogICAgICBpZiAodGhpcy5uaWsgPT09ICcnIHx8IHRoaXMubmFtYSA9PT0gJycpIHsKICAgICAgICBhbGVydCgnUGxlYXNlIGZpbGwgdGhlIGZvcm0gZmlyc3QgYmVmb3JlIHNhdmluZyBwaG90bycpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgZG93bmxvYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWRQaG90bycpCiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bob3RvVGFrZW4nKS50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnKQogICAgICAgICAgLnJlcGxhY2UoJ2ltYWdlL2pwZWcnLCAnaW1hZ2Uvb2N0ZXQtc3RyZWFtJykKICAgICAgICBkb3dubG9hZC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBjYW52YXMpCiAgICAgICAgLy8gcGFuZ2dpbCBhcGkgdGlhcCB5YW5nIGNlayBzdGF0dXMgZmlsZQogICAgICAgIHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmlzRG93bmxvYWRTdWNjZXNzKHRoaXMubmlrKQogICAgICAgIH0sIDUwMCkKICAgICAgfQogICAgfSwKICAgIGlzRG93bmxvYWRTdWNjZXNzIChuaWspIHsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvZG93bmxvYWRfc3VjY2Vzcy8nICsgbmlrKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICB0aGlzLmltYWdlU2F2ZWQgPSByZXNwb25zZS5kYXRhLnN0YXR1cyA9PT0gMjAwCiAgICAgICAgfSkKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["TambahMahasiswa.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TambahMahasiswa.vue","sourceRoot":"src/views","sourcesContent":["<!-- eslint-disable -->\n<template>\n  <v-container id=\"attd-list\" fluid tag=\"section\">\n    <v-row justify=\"center\">\n      <v-col\n        cols=\"12\"\n        md=\"12\">\n        <base-material-card\n          icon=\"mdi-account-plus\"\n          title=\"Tambah Mahasiswa\"\n          class=\"px-5 py-3\"\n        >\n          <v-form>\n            <v-container class=\"py-0\">\n              <v-row>\n                <v-col\n                  cols=\"12\"\n                  md=\"6\">\n                  <v-text-field\n                    v-model=\"nik\"\n                    label=\"NIM Mahasiswa\"\n                    type=\"number\"\n                    outlined\n                  />\n                </v-col>\n                <v-col\n                  cols=\"12\"\n                  md=\"6\">\n                  <v-text-field\n                    v-model=\"nama\"\n                    label=\"Nama Lengkap\"\n                    outlined\n                  />\n                </v-col>\n              </v-row>\n              <v-row>\n                <v-col cols=\"12\" md=\"12\">\n                  <div v-if=\"isCameraOpen\" class=\"camera-box\" align=\"center\">\n                    <video ref=\"camera\" :width=\"450\" :height=\"337.5\" autoplay></video>\n                    <canvas class=\"ml-3\" v-show=\"isPhotoTaken\" id=\"photoTaken\" ref=\"canvas\" :width=\"450\" :height=\"337.5\"></canvas>\n                  </div>\n                  <div class=\"camera-button\" align=\"center\">\n                    <v-btn :disabled=\"!formFilled || viaLive\" class=\"blue\" @click=\"toggleFormUpload\">\n                      Upload File\n                    </v-btn>\n                    <span class=\"mr-3\">OR</span>\n                    <v-btn :disabled=\"!formFilled || viaUpload\" @click=\"toggleCamera\" :class=\"{ 'success button is-rounded' : !isCameraOpen, 'red button is-rounded' : isCameraOpen}\">\n                      <span v-if=\"!isCameraOpen\">Open Camera</span>\n                      <span v-else>Close Camera</span>\n                    </v-btn>\n                    <v-btn v-if=\"isCameraOpen\" class=\"button\" color=\"blue\" @click=\"takePhoto\">\n                      <span v-if=\"!isPhotoTaken\">Take Photo</span>\n                      <span v-else>Retake Photo</span>\n                    </v-btn>\n                    <v-btn color=\"success\" v-if=\"isCameraOpen && isPhotoTaken\" class=\"camera-download\" @click=\"downloadImage\">\n                      <a style=\"text-decoration:none;color:white;\" id=\"downloadPhoto\" v-bind:download=\"nik + '.jpg'\" class=\"button\" role=\"button\">\n                        Save Photo\n                      </a>\n                    </v-btn>\n                  </div>\n                </v-col>\n              </v-row>\n              <v-row v-if=\"viaUpload\">\n                <v-col>\n                  <b-form-file\n                    v-model=\"file\"\n                    :state=\"Boolean(file)\"\n                    placeholder=\"Choose a file or drop it here...\"\n                    drop-placeholder=\"Drop file here...\"\n                  ></b-form-file>\n                  <div class=\"mt-3\">Selected file: {{ file ? file.name : '' }}</div>\n                </v-col>\n              </v-row>\n              <v-row>\n                <v-col cols=\"12\" md=\"12\">\n                  <v-btn\n                    block\n                    :disabled=\"!formReadyToSubmit()\"\n                    color=\"success\"\n                    class=\"mr-0\"\n                    @click=\"check\">\n                    submit\n                  </v-btn>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-form>\n        </base-material-card>\n      </v-col>\n\n    </v-row>\n  </v-container>\n</template>\n\n<script>\n  import axios from 'axios'\n  import { BFormFile } from 'bootstrap-vue'\n  export default {\n    components: {\n      'b-form-file': BFormFile,\n    },\n    data () {\n      return {\n        nik: '',\n        nama: '',\n        video: {},\n        canvas: {},\n        captures: [],\n        isCameraOpen: false,\n        isPhotoTaken: false,\n        imageSaved: false,\n        viaUpload: false,\n        viaLive: null,\n        file: {},\n      }\n    },\n    computed: {\n      formFilled () {\n        return this.nik !== '' && this.nama !== ''\n      },\n    },\n    mounted () {},\n    methods: {\n      check (e) {\n        e.preventDefault()\n        if (this.viaUpload) {\n          const formData = new FormData()\n          formData.append('file', this.file)\n          // You should have a server side REST API\n          axios.post('http://localhost:5000/add_employee_upload/' + this.nik + '/' + this.nama, formData, { headers: { 'Content-Type': 'multipart/form-data' } })\n            .then(() => {\n              console.log('success')\n              location.reload()\n            })\n            .catch(e => {\n              console.log(e.toString())\n              location.reload()\n            })\n        } else {\n          this.stopCameraStream()\n          axios\n            .get('http://localhost:5000/add_employee/' + this.nik + '/' + this.nama)\n            .then(response => {\n              console.log(response)\n              alert('Tambah Mahasiswa Berhasil!')\n              location.reload()\n            })\n        }\n      },\n      formReadyToSubmit () {\n        if (this.viaUpload) {\n          // kalau via upload, siap submit berarti semua form telah diisi\n          return this.nik !== '' && this.nama !== '' && this.file\n        } else {\n          // kalau via foto live, siap submit berarti semua form telah diisi dan gambar telah tersimpan di Downloads\n          return this.nik !== '' && this.nama !== '' && this.imageSaved && this.isPhotoTaken\n        }\n      },\n      capture () {\n        console.log('capture image')\n      },\n      toggleCamera () {\n        if (this.isCameraOpen) {\n          this.viaLive = false\n          this.isCameraOpen = false\n          this.isPhotoTaken = false\n          this.stopCameraStream()\n        } else {\n          this.viaLive = true\n          this.isCameraOpen = true\n          this.createCameraElement()\n        }\n      },\n      toggleFormUpload () {\n        console.log('using upload')\n        this.viaUpload = true\n      },\n      createCameraElement () {\n        const constraints = (window.constraints = {\n          audio: false,\n          video: true,\n        })\n        navigator.mediaDevices\n          .getUserMedia(constraints)\n          .then(stream => {\n            this.$refs.camera.srcObject = stream\n          })\n          .catch(error => {\n            alert(error)\n          })\n      },\n      stopCameraStream () {\n        const tracks = this.$refs.camera.srcObject.getTracks()\n        tracks.forEach(track => {\n          track.stop()\n        })\n      },\n      takePhoto () {\n        // console.log('taking photo')\n        this.isPhotoTaken = !this.isPhotoTaken\n        const context = this.$refs.canvas.getContext('2d')\n        context.drawImage(this.$refs.camera, 0, 0, 450, 337.5)\n      },\n      downloadImage () {\n        if (this.nik === '' || this.nama === '') {\n          alert('Please fill the form first before saving photo')\n        } else {\n          const download = document.getElementById('downloadPhoto')\n          const canvas = document.getElementById('photoTaken').toDataURL('image/jpeg')\n            .replace('image/jpeg', 'image/octet-stream')\n          download.setAttribute('href', canvas)\n          // panggil api tiap yang cek status file\n          window.setInterval(() => {\n            this.isDownloadSuccess(this.nik)\n          }, 500)\n        }\n      },\n      isDownloadSuccess (nik) {\n        axios\n          .get('http://localhost:5000/download_success/' + nik)\n          .then(response => {\n            // console.log(response.data)\n            this.imageSaved = response.data.status === 200\n          })\n      },\n    },\n  }\n</script>\n\n<style>\n</style>\n"]}]}