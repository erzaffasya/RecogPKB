{"remainingRequest":"C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\src\\views\\CreateReport.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\src\\views\\CreateReport.vue","mtime":1611047499730},{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ERZA\\Documents\\GitHub\\RecogPKB\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IEpzb25FeGNlbCBmcm9tICd2dWUtanNvbi1leGNlbCcKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDcmVhdGVSZXBvcnQnLAogIGNvbXBvbmVudHM6IHsKICAgICdkb3dubG9hZC1leGNlbCc6IEpzb25FeGNlbCwKICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgcGlja2VyOiBudWxsLAogICAgICBkYXRhbGlzdDogewogICAgICAgIGRhdGU6ICcnLAogICAgICAgIGxpc3Q6IFtdLAogICAgICB9LAogICAgICBmaWVsZHM6IHsKICAgICAgICAnTklNIE1haGFzaXN3YSc6ICdpZF9rYXJ5YXdhbicsCiAgICAgICAgJ05hbWEgTWFoYXNpc3dhJzogJ25hbWEnLAogICAgICAgICdBYnNlbic6ICdkYXRhbmcnLAogICAgICAgIC8vICdKYW0gUHVsYW5nJzogJ3B1bGFuZycsCiAgICAgIH0sCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogIH0sCiAgbW91bnRlZCAoKSB7CiAgICB0aGlzLnBpY2tlciA9IHRoaXMuZ2V0RGF0ZSgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBjYW5Eb3dubG9hZCAoKSB7CiAgICAgIHJldHVybiB0aGlzLnBpY2tlciA9PT0gdGhpcy5kYXRhbGlzdC5kYXRlICYmIHRoaXMuZGF0YWxpc3QubGlzdC5sZW5ndGggPiAwCiAgICB9LAogICAgY2hlY2sgKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgIGF4aW9zCiAgICAgICAgLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL3JlcG9ydC8nICsgdGhpcy5waWNrZXIpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIGFsZXJ0KCdUaWRhayBhZGEgY2F0YXRhbiBrZWhhZGlyYW4gcGFkYSB0YW5nZ2FsICcgKyB0aGlzLnBpY2tlcikKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZGF0YWxpc3QuZGF0ZSA9IHRoaXMucGlja2VyCiAgICAgICAgICAgIHRoaXMuZGF0YWxpc3QubGlzdCA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSwKICAgIGdldERhdGUgKCkgewogICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkKICAgICAgdmFyIGRkID0gU3RyaW5nKHRvZGF5LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKQogICAgICB2YXIgbW0gPSBTdHJpbmcodG9kYXkuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJykKICAgICAgdmFyIHl5eXkgPSB0b2RheS5nZXRGdWxsWWVhcigpCiAgICAgIHJldHVybiB5eXl5ICsgJy0nICsgbW0gKyAnLScgKyBkZAogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["CreateReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateReport.vue","sourceRoot":"src/views","sourcesContent":["<!-- eslint-disable -->\n<template>\n  <v-container id=\"attd-list\" fluid tag=\"section\">\n    <v-row justify=\"center\">\n      <v-col\n        cols=\"12\"\n        md=\"12\">\n        <base-material-card\n          icon=\"mdi-account-plus\"\n          title=\"Download Laporan Absensi\"\n          class=\"px-5 py-3\"\n        >\n          <v-form>\n            <v-container class=\"py-0\">\n                <v-row justify=\"center\">\n                    <v-date-picker\n                        v-model=\"picker\"\n                        full-width\n                    >\n                    </v-date-picker>\n                </v-row>\n                <v-row>\n                <v-col cols=\"12\" md=\"6\">\n                    <v-btn\n                    block\n                    color=\"success\"\n                    class=\"mr-0\"\n                    @click=\"check\">\n                    process report\n                    </v-btn>\n                </v-col>\n                <v-col cols=\"12\" md=\"6\">\n                  <v-btn\n                    block\n                    color=\"blue\"\n                    :disabled=\"!canDownload()\"\n                    class=\"mr-0\"\n                    @click=\"check\">\n\n                    <download-excel\n                      :data   = \"datalist.list\"\n                      :fields = \"fields\"\n                      worksheet = \"My Worksheet\"\n                      :name    = \"'Attendance List ' + this.picker + '.xls'\">\n                    </download-excel>\n\n                  </v-btn>\n                </v-col>\n                </v-row>\n\n            </v-container>\n          </v-form>\n        </base-material-card>\n      </v-col>\n\n    </v-row>\n  </v-container>\n</template>\n\n<script>\n  import axios from 'axios'\n  import JsonExcel from 'vue-json-excel'\n  export default {\n    name: 'CreateReport',\n    components: {\n      'download-excel': JsonExcel,\n    },\n    data () {\n      return {\n        picker: null,\n        datalist: {\n          date: '',\n          list: [],\n        },\n        fields: {\n          'NIM Mahasiswa': 'id_karyawan',\n          'Nama Mahasiswa': 'nama',\n          'Absen': 'datang',\n          // 'Jam Pulang': 'pulang',\n        },\n      }\n    },\n    computed: {\n    },\n    mounted () {\n      this.picker = this.getDate()\n    },\n    methods: {\n      canDownload () {\n        return this.picker === this.datalist.date && this.datalist.list.length > 0\n      },\n      check (e) {\n        e.preventDefault()\n        axios\n          .get('http://localhost:5000/report/' + this.picker)\n          .then(response => {\n            if (response.data.length === 0) {\n              alert('Tidak ada catatan kehadiran pada tanggal ' + this.picker)\n            } else {\n              this.datalist.date = this.picker\n              this.datalist.list = response.data\n            }\n          })\n      },\n      getDate () {\n        const today = new Date()\n        var dd = String(today.getDate()).padStart(2, '0')\n        var mm = String(today.getMonth() + 1).padStart(2, '0')\n        var yyyy = today.getFullYear()\n        return yyyy + '-' + mm + '-' + dd\n      },\n    },\n  }\n</script>\n\n<style>\n</style>\n"]}]}